<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Inspyre - Add Project</title>

	<link rel="stylesheet" type="text/css" href="../css/w3.css">
	<link rel="stylesheet" type="text/css" href="../css/fonts.css">
	<link rel="stylesheet" type="text/css" href="../css/fa-all.css">
	<link rel="stylesheet" type="text/css" href="../css/coryG_base.css">
	<link rel="stylesheet" type="text/css" href="../css/coryG_UIOps.css">
	<link rel="stylesheet" type="text/css" href="../css/styles.css">
	<link rel="stylesheet" type="text/css" href="../css/s-auto/autoforms.css">

	<script src="../js/SuperScript.js"></script>
	<script src="../js/toappend.js"></script>
	<script src="../js/customalerter.js"></script>
	<script src="../js/coryG_UIOps.js"></script>
	<script src="../js/app.js"></script>

	<style>
		:root {
			--bg-color: #0a0f14;
			--primary: #00ffc6;
			--secondary: #00a1a7;
			--text-light: #ffffff;
			--text-muted: #99aab5;
			--card-bg: #101820;
		}
		* {
			box-sizing: border-box;
			transition: 0.3s ease-out;
		}
		body {
			margin: 0;
		}
		nav{backdrop-filter: none !important;}
		header{padding: 128px 0 64px 0;}
		footer{padding: 24px 2rem  12px 2rem !important;}
		.section{padding: var(--size-md) 0 !important;}

		.status {
			margin-top: 15px;
			padding: 10px;
			border-radius: 6px;
			font-size: 0.95em;
			display: none;
		}
		.status.success {
			background: rgba(0, 255, 198, 0.15);
			color: var(--primary);
		}
		.status.error {
			background: rgba(255, 0, 0, 0.15);
			color: #ff6b6b;
		}
	</style>
</head>

<body>
	<nav class="" data-scroller data-scrollend="30%" data-classdata="w3-animate-opacity,scrolled">
		<div class="navcon">
			<div class="logo">
				<a href="#" class="logotxt">Inspyre</a>
			</div>

			<div class="navlinks" id="sitelinks" data-visibledata="1,1,1">
				<a href="index.html" class="active"><i class="fa fa-arrow-left"></i></a>
			</div>
		</div>
	</nav>

	<header class="w3-center hero small">
		<h1 class="hedtxt2">Code Playground</h1>
		<p>here are some of the apps hosted on this platform</p>
	</header>
	<div class="section">
		<h2 style="text-align:center; margin-bottom:20px;">Add a New Project</h2>

		<form id="projectForm" class="s-autoform-v spacy-md">
			<input type="password" name="apikey" placeholder="Access key" required>
			<input type="text" name="name" placeholder="Project Name" required>

			<select name="type" required>
				<option value="" disabled selected>-- Select Type --</option>
				<option value="app">App</option>
				<option value="applet">Applet</option>
				<option value="tool">Tool</option>
			</select>

			<input type="text" name="tags" placeholder="Tags (comma separated)">

			<textarea name="description" placeholder="Description" required></textarea>

			<input type="url" name="link" placeholder="Link to the App" required>

			<button type="submit">Submit Project</button>
		</form>
	</div>

	<div id="statusMsg" class="status themebg"></div>

	<footer class="footer">
		<p class="text-center" style="font-size:.875rem;color:var(--clr-text-muted)">
			Â© <span id="year"></span> Inspyre ltd. All rights reserved.
		</p>
	</footer>

	<script>
		document.getElementById('projectForm').addEventListener('submit', async function(e) {
			e.preventDefault();

			const form = e.target;
			const formData = new FormData(form);

			const statusMsg = document.getElementById('statusMsg');
			statusMsg.style.display = 'block';
			statusMsg.className = 'status';
			statusMsg.textContent = 'Submitting...';

			try {
				const res = await fetch('res/additem.php', {
					method: 'POST',
					body: formData
				});
				const text = await res.text();

				if (res.ok) {
					alert_success('Success: ' + text);
					form.reset();
					statusMsg.textContent = '';
				} else {
					alert_danger('Error: ' + text);
					statusMsg.textContent = '';
				}
			} catch (err) {
				alert_danger('Error: ' + err.message);
				statusMsg.textContent = '';
			}
		});
	</script>
</body>
</html>
